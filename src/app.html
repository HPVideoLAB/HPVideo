<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="%sveltekit.assets%/favicon.png" />
    <link rel="manifest" href="%sveltekit.assets%/manifest.json" crossorigin="use-credentials" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="robots" content="index, follow" />
    <link rel="search" type="application/opensearchdescription+xml" title="HPVideo" href="/opensearch.xml" />
    <script src="https://cdn.jsdelivr.net/npm/iconify-icon@3.0.0/dist/iconify-icon.min.js"></script>
    <script>
      // On page load or when changing themes, best to add inline in `head` to avoid FOUC
      (() => {
        // ğŸ”¥ ä¿®å¤ï¼šè·å–ç³»ç»Ÿä¸»é¢˜åå¥½
        const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
        const savedTheme = localStorage.getItem('theme');

        if (savedTheme && savedTheme.includes('oled')) {
          // OLED ä¸»é¢˜
          document.documentElement.style.setProperty('--color-gray-900', '#000000');
          document.documentElement.style.setProperty('--color-gray-950', '#000000');
          document.documentElement.classList.add('dark');
        } else if (savedTheme === 'light') {
          // ç”¨æˆ·æ˜ç¡®é€‰æ‹©æµ…è‰²
          document.documentElement.classList.add('light');
        } else if (savedTheme === 'dark') {
          // ç”¨æˆ·æ˜ç¡®é€‰æ‹©æ·±è‰²
          document.documentElement.classList.add('dark');
        } else {
          // ğŸ”¥ ä¿®å¤ï¼šé»˜è®¤è·Ÿéšç³»ç»Ÿï¼ˆåŒ…æ‹¬ savedTheme === 'system' æˆ– savedTheme ä¸å­˜åœ¨ï¼‰
          document.documentElement.classList.add(prefersDark ? 'dark' : 'light');
          // å¦‚æœæ²¡æœ‰ä¿å­˜ä¸»é¢˜ï¼Œè®¾ç½®ä¸º system
          if (!savedTheme) {
            localStorage.setItem('theme', 'system');
          }
        }

        // ç›‘å¬ç³»ç»Ÿä¸»é¢˜å˜åŒ–
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (e) => {
          const currentTheme = localStorage.getItem('theme');
          // åªæœ‰åœ¨è·Ÿéšç³»ç»Ÿæ¨¡å¼ä¸‹æ‰å“åº”å˜åŒ–
          if (!currentTheme || currentTheme === 'system') {
            if (e.matches) {
              document.documentElement.classList.add('dark');
              document.documentElement.classList.remove('light');
            } else {
              document.documentElement.classList.add('light');
              document.documentElement.classList.remove('dark');
            }
          }
        });
      })();
    </script>
    <title>HPVideo</title>

    %sveltekit.head%
  </head>
  <body data-sveltekit-preload-data="hover">
    <div style="display: contents">%sveltekit.body%</div>

    <div
      id="splash-screen"
      style="
        position: fixed;
        z-index: 100;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
      "
    >
      <style type="text/css" nonce="">
        html {
          overflow-y: scroll !important;
        }
        /* ğŸ”¥ splash-screen ä¸»é¢˜é€‚é… */
        #splash-screen {
          background: #ffffff;
          transition: opacity 0.3s ease-out;
        }
        html.dark #splash-screen {
          background: #0f0f0f;
        }
        /* ğŸ”¥ æ·»åŠ  logo å‘¼å¸åŠ¨ç”» */
        @keyframes pulse {
          0%,
          100% {
            opacity: 1;
            transform: scale(1);
          }
          50% {
            opacity: 0.7;
            transform: scale(0.95);
          }
        }
        #splash-logo {
          animation: pulse 1.5s ease-in-out infinite;
        }
      </style>

      <img id="splash-logo" style="width: 5rem; height: 5rem" src="/creator/favicon.png" alt="Loading..." />
    </div>
  </body>
</html>
